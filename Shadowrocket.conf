[General]
bypass-system = true
doh-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
dns-server = system
ipv6 = false

[Rule]
# Advert 广告屏蔽
DOMAIN-SET,https://anti-ad.net/surge2.txt,REJECT
# Global 全球加速
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list, PROXY
# China  国内直连
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/China/China.list, DIRECT

GEOIP,CN,DIRECT
FINAL,PROXY

[Host]
*testflight.apple.com = server:8.8.4.4


[URL Rewrite]
(^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302 
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject

^https?:\/\/youtubei\.googleapis\.com\/youtubei\/v\d\/player\/ad_break - reject
^https?:\/\/(www|s)\.youtube\.com\/api\/stats\/ads - reject
^https?:\/\/(www|s)\.youtube\.com\/(pagead|ptracking) - reject
^https?:\/\/s\.youtube\.com\/api\/stats\/qoe\?adcontext - reject

[Script]



[MITM]
ca-passphrase = Shadowrocket
ca-p12 = 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
hostname = -redirector*.googlevideo.com,*.googlevideo.com,www.youtube.com,s.youtube.com,youtubei.googleapis.com
enable = true
